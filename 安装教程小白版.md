# ğŸ“˜ PDFChatAnnotator å®‰è£…æ•™ç¨‹ Â· å°ç™½ç‰ˆä¿å§†çº§æŒ‡å—

## ğŸ“Œ ä½¿ç”¨å‰é¡»çŸ¥

- å½“å‰æ”¯æŒçš„å›¾å½•ç±»å‹ä¸ºï¼š

  - æ¯ä¸€é¡µçš„å›¾ç‰‡ä»…ä¸è¯¥é¡µçš„æ–‡å­—å†…å®¹ç›¸å…³è” (a)ã€‚
  - åœ¨æ–°ä¸€é¡µæ–‡å­—å¼€å§‹ä¹‹å‰å‡ºç°çš„æ‰€æœ‰å›¾ç‰‡ï¼Œå‡ä¸å½“å‰é¡µçš„æ–‡å­—å†…å®¹ç›¸å…³è” (b)ã€‚
  - åœ¨ä¸€é¡µä¸­å­˜åœ¨å¤šä¸ªå›¾ç‰‡-æ–‡å­—åŒ¹é…å¯¹ï¼Œæ¯å¼ å›¾ç‰‡ä¸å…¶ä¸‹æ–¹çš„æ–‡å­—å†…å®¹ç›¸å…³è”ï¼ˆcï¼‰ã€‚âš ï¸ ç”±äºè¯¥ç±»å‹ä¸å›¾å½•è‡ªèº«ç‰¹æ€§é«˜åº¦ç›¸å…³ï¼Œç›®å‰æš‚æœªå¼€æºã€‚

    ![Catalog Types](./public/images/catalog-type.png)

---

## ğŸ§© æ­¥éª¤ä¸€ï¼šå¿…å¤‡è½¯ä»¶ä¸‹è½½

### âœ… ä¸‹è½½ PDFChatAnnotator é¡¹ç›®ä»£ç 

åœ°å€ï¼šhttps://github.com/VanillaTY/PDFChatAnnotator

1. ç‚¹å‡»ç»¿è‰²çš„ `Code` æŒ‰é’®ï¼Œé€‰æ‹© `Download ZIP` ä¸‹è½½å‹ç¼©åŒ…
2. ä¸‹è½½å®Œæˆåï¼Œå³é”®è§£å‹åˆ°ä»»æ„ä½ç½®ï¼Œä¾‹å¦‚æ¡Œé¢æˆ– D ç›˜

---

### âœ… å®‰è£… VSCode ç¼–è¾‘å™¨

å®˜ç½‘åœ°å€ï¼šhttps://code.visualstudio.com/download

1. ä¸‹è½½ä¸ä½ ç³»ç»ŸåŒ¹é…çš„ç‰ˆæœ¬ï¼ˆWindows/macOSï¼‰
2. æŒ‰ç…§æç¤ºå®‰è£…ï¼Œä¸€è·¯â€œä¸‹ä¸€æ­¥â€å³å¯
3. å®‰è£…è¿‡ç¨‹ä¸­å»ºè®®å‹¾é€‰ã€Œåˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼ã€æ–¹ä¾¿åç»­ä½¿ç”¨

---

## ğŸ”‘ æ­¥éª¤äºŒï¼šè·å–å¤§æ¨¡å‹ API Keyï¼ˆé€‚ç”¨äºå›½å†…ç”¨æˆ·ï¼‰

ä½¿ç”¨ ChatAnywhere å¹³å°ï¼Œ**æ— éœ€ç§‘å­¦ä¸Šç½‘ï¼Œæ”¯æŒæ”¯ä»˜å®/å¾®ä¿¡æ”¯ä»˜**ã€‚

### æ“ä½œæ­¥éª¤ï¼š

1. æ‰“å¼€ç½‘å€ï¼šhttps://api.chatanywhere.tech/#/
2. ç‚¹å‡»å³ä¸Šè§’ã€Œè´­ä¹° / å……å€¼ã€æŒ‰é’®ï¼Œé€‰æ‹©å¥—é¤å¹¶ä»˜æ¬¾
3. å……å€¼å®Œæˆåï¼Œè·å–ä½ çš„ `OpenAI API Key`
4. æ‰¾åˆ° PDFChatAnnotator é¡¹ç›®ä»£ç ä¸­çš„ `PDFChatAnnotator/utils/prompt.py` æ–‡ä»¶
5. ç”¨ä½ çš„ Key æ›¿æ¢å…¶ä¸­çš„ `api_key` å€¼

### ä½¿ç”¨ DeepSeek API çš„æ–¹æ¡ˆ

1. è®¿é—® DeepSeek å®˜ç½‘ï¼šhttps://platform.deepseek.com/
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. åœ¨ä¸ªäººä¸­å¿ƒå……å€¼è´­ä¹° API Key
4. æ‰“å¼€ `utils/prompt.py` æ–‡ä»¶
5. ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š
   ```python
   client = OpenAI(
       api_key="æ›¿æ¢ä¸ºä½ çš„ DeepSeek API Key",
       base_url="https://api.deepseek.com"
   )
   ```
6. æ›´æ”¹ `model` å‚æ•°è®¾ç½®ä¸º `"deepseek-chat"` æˆ–å…¶ä»– DeepSeek æ”¯æŒçš„æ¨¡å‹
   ```python
    response = client.chat.completions.create(
        model="deepseek-chat",
        # ... å…¶ä»–ä¿æŒä¸å˜
    )
   ```

---

## ğŸ æ­¥éª¤ä¸‰ï¼šå®‰è£… Anacondaï¼ˆPython ç¯å¢ƒç®¡ç†å·¥å…·ï¼‰

---

### ğŸªŸ Windows å®‰è£…æ•™ç¨‹

#### 1ï¸âƒ£ ä¸‹è½½å¹¶å®‰è£…

- å®˜ç½‘ï¼šhttps://www.anaconda.com/download

- è¦è¾“å…¥é‚®ç®±åœ°å€ï¼Œå¯ä»¥é€‰æ‹©è·³è¿‡è¿™ä¸€æ­¥ï¼Œä¸‹é¢æœ‰ã€ŒSkip registrationã€

- ä¸‹è½½é€‚ç”¨äº Windows çš„ â€œ**64-Bit Graphical Installer**â€ï¼ˆçº¦ 951MBï¼‰

- è¿è¡Œå®‰è£…ç¨‹åº

  - åŒå‡»ä¸‹è½½å¥½çš„ `.exe` å®‰è£…åŒ…å¼€å§‹å®‰è£…

  **å®‰è£…æ­¥éª¤è¯¦è§£**

  ç¬¬ä¸€æ­¥ï¼šæ¬¢è¿é¡µé¢

  - ç‚¹å‡» â€œNextâ€

  ç¬¬äºŒæ­¥ï¼šè®¸å¯åè®®

  - é€‰æ‹© â€œI Agreeâ€ æ¥å—åè®®

  ç¬¬ä¸‰æ­¥ï¼šé€‰æ‹©å®‰è£…ç”¨æˆ·

  - æ¨èé€‰æ‹© â€œJust Meâ€ï¼ˆä»…ä¸ºå½“å‰ç”¨æˆ·å®‰è£…ï¼‰
  - ç‚¹å‡» â€œNextâ€

  ç¬¬å››æ­¥ï¼šé€‰æ‹©å®‰è£…è·¯å¾„ï¼ˆâš ï¸ è¯·è®°ä¸‹è¿™ä¸ªè·¯å¾„ï¼Œåé¢é…ç½®ä¼šç”¨åˆ°ï¼‰

  - **å»ºè®®ä½¿ç”¨é»˜è®¤è·¯å¾„**ï¼ˆä¾‹å¦‚ï¼š`C:\Users\ä½ çš„ç”¨æˆ·å\Anaconda3`ï¼‰ï¼ˆâš ï¸ æ³¨æ„ï¼šè¿™ä¸ªè·¯å¾„è®°å½•ä¸‹æ¥ï¼‰
  - ç‚¹å‡» â€œNextâ€

  ç¬¬äº”æ­¥ï¼šé«˜çº§é€‰é¡¹

  - ä¿æŒé»˜è®¤é€‰é¡¹
  - ç‚¹å‡» â€œInstallâ€

  ç¬¬å…­æ­¥ï¼šç­‰å¾…å®‰è£…å®Œæˆ

  - å®‰è£…è¿‡ç¨‹å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼Œè¯·è€å¿ƒç­‰å¾…

  ç¬¬ä¸ƒæ­¥ï¼šç‚¹å‡» â€œNextâ€åˆ°æœ€åä¸€é¡µï¼Œ**å–æ¶ˆå‹¾é€‰ä¸¤ä¸ªé€‰é¡¹**ï¼Œç„¶å â€œFinishâ€ å®Œæˆå®‰è£…

#### 2ï¸âƒ£ é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡

âš ï¸ æ³¨æ„ï¼šè¿™ä¸€æ­¥éœ€è¦ä¸Šé¢ã€Œä¸‹è½½å¹¶å®‰è£…ã€ä¸­çš„ã€Œç¬¬å››æ­¥ï¼šé€‰æ‹©å®‰è£…è·¯å¾„ã€ä¸­è®°å½•ä¸‹æ¥çš„å®‰è£…è·¯å¾„

##### ç¬¬ä¸€æ­¥ï¼šç³»ç»Ÿç¯å¢ƒå˜é‡è®¾ç½®ç•Œé¢

æ–¹æ³•ä¸€ï¼š

- åœ¨ Windows æœç´¢æ¡†é‡Œé¢æœç´¢ ã€Œé«˜çº§ç³»ç»Ÿè®¾ç½®/æŸ¥çœ‹é«˜çº§ç³»ç»Ÿè®¾ç½®ã€
- åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œç‚¹å‡»ã€Œç¯å¢ƒå˜é‡ã€

æ–¹æ³•äºŒï¼š

1. **å³é”®**ç‚¹å‡»ã€Œæ­¤ç”µè„‘ / æˆ‘çš„ç”µè„‘ã€ â†’ é€‰æ‹©ã€Œå±æ€§ã€
2. å·¦ä¾§æœç´¢æ¡†é‡Œé¢æœç´¢çš„ã€Œé«˜çº§ç³»ç»Ÿè®¾ç½®/æŸ¥çœ‹é«˜çº§ç³»ç»Ÿè®¾ç½®ã€
3. åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œç‚¹å‡»ã€Œç¯å¢ƒå˜é‡ã€

##### ç¬¬äºŒæ­¥ï¼šæ·»åŠ  Anaconda åˆ°ç³»ç»Ÿ PATH

1. æ‰“å¼€ã€Œé«˜çº§ç³»ç»Ÿè®¾ç½®ã€ â†’ ç‚¹å‡»ã€Œç¯å¢ƒå˜é‡ã€

2. åœ¨ã€Œ**ç³»ç»Ÿå˜é‡**ã€ä¸­æ‰¾åˆ° `Path`å¹¶é€‰ä¸­ â†’ ç‚¹å‡»ã€Œç¼–è¾‘ã€ â†’ ã€Œæ–°å»ºã€ï¼Œæ·»åŠ ä»¥ä¸‹ä¸¤è¡Œï¼šï¼ˆâš ï¸ åˆšåˆšä¿å­˜çš„è·¯å¾„æ›¿æ¢ C:\Users\ä½ çš„ç”¨æˆ·å\Anaconda3ï¼‰

   ```
   C:\Users\ä½ çš„ç”¨æˆ·å\Anaconda3
   C:\Users\ä½ çš„ç”¨æˆ·å\Anaconda3\Scripts
   ```

3. ç‚¹å‡»ã€Œç¡®å®šã€ä¿å­˜å³å¯

#### 3ï¸âƒ£ éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ

#### ä½¿ç”¨ç»ˆç«¯

- åŒæ—¶æŒ‰é”®ç›˜ä¸Šçš„ã€Œwinã€+ã€ŒRã€é”®
- è¾“å…¥ cmdï¼ŒæŒ‰å›è½¦
- è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```
conda --version
```

å¦‚æœè¾“å‡ºå½¢å¦‚çš„ç‰ˆæœ¬å·è¡¨ç¤ºæˆåŠŸ âœ…ï¼š

```
conda 24.3.0
```

è¯´æ˜å®‰è£…æˆåŠŸï¼

---

### ğŸ macOS å®‰è£…æ•™ç¨‹

#### 1ï¸âƒ£ å®‰è£…å‰é¡»çŸ¥

- æ‰“å¼€ã€Œè‹¹æœèœå•ã€â†’ã€Œå…³äºæœ¬æœºã€ï¼Œç³»ç»Ÿéœ€ä¸º macOS 10.13 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ— éœ€æ‹…å¿ƒç³»ç»ŸåŸç”Ÿ Pythonï¼ŒAnaconda ä½¿ç”¨ç‹¬ç«‹ç¯å¢ƒ

#### 2ï¸âƒ£ ä¸‹è½½å¹¶å®‰è£…

- å®˜ç½‘ï¼šhttps://www.anaconda.com/download
- æ‰¾åˆ° `macOS` åŒºåŸŸï¼Œä¸‹è½½ `64-Bit Graphical Installer`ï¼ˆIntelï¼‰æˆ– `arm64`ï¼ˆM ç³»åˆ—èŠ¯ç‰‡ï¼‰
- åŒå‡» `.pkg` æ–‡ä»¶å¼€å§‹å®‰è£…ï¼Œå®‰è£…è·¯å¾„å»ºè®®é»˜è®¤

#### 3ï¸âƒ£ é…ç½®ç»ˆç«¯è·¯å¾„ï¼ˆé€‚ç”¨äº zshï¼‰

```bash
echo 'export PATH="$HOME/anaconda3/bin:$PATH"' >> ~/.zprofile
source ~/.zprofile
```

#### 4ï¸âƒ£ éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ

1. åŒæ—¶æŒ‰é”®ç›˜ä¸Šçš„ã€Œcommandã€+ ã€Œç©ºæ ¼ã€é”®ï¼Œè¾“å…¥ terminal ï¼Œç‚¹å‡»ã€Œç»ˆç«¯ã€ï¼Œå°±æ‰“å¼€äº† Terminalï¼ˆç»ˆç«¯ï¼‰
2. è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```
conda --version
```

å¦‚æœè¾“å‡ºå½¢å¦‚çš„ç‰ˆæœ¬å·è¡¨ç¤ºæˆåŠŸ âœ…ï¼š

```
conda 24.3.0
```

è¯´æ˜å®‰è£…æˆåŠŸï¼

---

## ğŸ§ª æ­¥éª¤å››ï¼šåˆ›å»ºä¸“å± Anaconda ç¯å¢ƒ

1. æ‰“å¼€ç»ˆç«¯ Terminal

   Windows ç”¨æˆ·ï¼š

   - **æŒ‰ä¸‹** `Win` é”®ï¼Œæˆ–è€…ç‚¹å‡» Windows å¼€å§‹èœå•ä¸­çš„æœç´¢æ¡†

     è¾“å…¥ï¼š`cmd`

     åœ¨æœç´¢ç»“æœä¸­å‡ºç°çš„ã€Œå‘½ä»¤æç¤ºç¬¦ã€ï¼Œ**å³é”®ç‚¹å‡»** â†’ é€‰æ‹©ã€Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€

   Mac ç”¨æˆ·ï¼š

   - åŒæ—¶æŒ‰é”®ç›˜ä¸Šçš„ `Command + ç©ºæ ¼`ï¼Œè¾“å…¥â€œterminalâ€å¹¶å›è½¦

2. æŸ¥çœ‹ç°æœ‰ç¯å¢ƒï¼ˆå¯é€‰ï¼‰ï¼š

   ```bash
   conda env list
   ```

3. åˆ›å»ºæ–°ç¯å¢ƒï¼š

   ```bash
   conda create -n pdfannotator python=3.9
   ```

   æç¤º `Proceed ([y]/n)?` æ—¶è¾“å…¥ï¼š

   ```
   y
   ```

4. æ¿€æ´»ç¯å¢ƒï¼š

   ```bash
   conda activate pdfannotator
   ```

   å¦‚æœå‘½ä»¤è¡Œå‰é¢å‡ºç° `(pdfannotator)` å°±è¡¨ç¤ºæ¿€æ´»æˆåŠŸï¼

5. åˆå§‹åŒ– condaï¼ˆWindows ç”¨æˆ·éœ€è¦åšè¿™ä¸€æ­¥ï¼‰ï¼š

   ```bash
   conda init --system --all
   ```

---

## âš™ï¸ æ­¥éª¤äº”ï¼šé…ç½®é¡¹ç›®ç¯å¢ƒå¹¶è¿è¡Œ

### âœ… æ‰“å¼€é¡¹ç›®

1. æ‹–åŠ¨ PDFChatAnnotator æ–‡ä»¶å¤¹åˆ° Visual Studio Code å›¾æ ‡ä¸Šï¼Œï¼ˆæˆ–è€…æ‰“å¼€ Visual Studio Code è½¯ä»¶ï¼Œåœ¨èœå•æ ä¸­é€‰æ‹©æ‰“å¼€ PDFChatAnnotator ç›®å½•ï¼‰
2. å¦‚æœæç¤ºã€ŒDo you trust the authorsã€ï¼Œè¯·é€‰æ‹©ã€ŒYesã€

### âœ… é…ç½®ç»ˆç«¯é»˜è®¤ä¸º cmdï¼ˆWindows ç”¨æˆ·éœ€è¦åšï¼‰

- ç‚¹å‡» Visual Studio Code èœå•ä¸Šçš„ Terminal -> New Terminal
  - æ³¨æ„ä¸‹é¢æ‰“å¼€çš„ Terminal çª—å£å³ä¸Šè§’æœ‰ä¸€ä¸ª ã€Œpowershellã€ï¼Œç‚¹å‡»ã€Œpowershellã€å³è¾¹çš„ + å·å†å³è¾¹çš„ä¸‹æ‹‰æŒ‰é’®
  - ç‚¹å‡» ã€ŒSelect Default Profileã€
  - é€‰æ‹© ã€ŒCommand Promptã€
  - ç‚¹å‡» Terminal çª—å£å³ä¸Šè§’çš„å…³é—­æŒ‰é’®
  - é‡æ–°ç‚¹å‡» Visual Studio Code èœå•ä¸Šçš„ Terminal -> New Terminal ï¼Œå¦‚æœå³ä¾§æ˜¾ç¤ºã€Œcmdã€ï¼Œåˆ™è¯´æ˜æ­£ç¡®

### âœ… å®‰è£…ä¾èµ–

åœ¨ Terminal çª—å£è¾“å…¥ï¼š

```
conda activate pdfannotator
```

å‘½ä»¤è¡Œå‰é¢å‡ºç°ï¼ˆpdfannotatorï¼‰åˆ™è¯´æ˜ç¯å¢ƒå¯åŠ¨æˆåŠŸï¼Œä¹‹åè¾“å…¥ï¼š

```bash
pip install -r requirements.txt
```

é¢å¤–ä¾èµ–ï¼š

- Windows ç”¨æˆ·éœ€è¦è¾“å…¥ï¼š

  ```bash
  pip install pyreadline3
  ```

- macOS ç”¨æˆ·éœ€è¦è¾“å…¥ï¼š

  ```bash
  pip install readline
  ```

### âœ… å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
python manage.py runserver
```

çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºè¡¨ç¤ºè¿è¡ŒæˆåŠŸï¼š

```
Starting development server at http://127.0.0.1:8000/
```

æŒ‰ä½ Ctrl å¹¶ç‚¹å‡»é“¾æ¥ï¼Œæˆ–å¤åˆ¶ç½‘å€åˆ°æµè§ˆå™¨æ‰“å¼€ï¼Œå°±å¯åŠ¨ PDFChatAnnotator ä¸»ç¨‹åºå•¦ï¼

---

## ğŸ“„ PDF æ–‡ä»¶é¢„å¤„ç†ï¼ˆâš ï¸ å¿…é¡»ï¼‰

åœ¨æ­£å¼è¿è¡Œ PDFChatAnnotator é¡¹ç›®å‰ï¼Œ**ä½ éœ€è¦å…ˆå¯¹ PDF æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†**ï¼ŒåŒ…æ‹¬æ–‡æœ¬å’Œå›¾ç‰‡çš„æå–ï¼Œä»¥ç¡®ä¿åç»­å¯ä»¥é¡ºåˆ©è¿›è¡Œæ³¨é‡Šä»»åŠ¡ã€‚

è¯·æ ¹æ®ä½ çš„è¯­è¨€åå¥½é€‰æ‹©ä¸‹æ–¹çš„æ•™ç¨‹è¿›è¡Œæ“ä½œï¼š

- ğŸ“˜ [ä¸­æ–‡é¢„å¤„ç†æ•™ç¨‹](./file-preprocess/README.md)
- ğŸ“™ [English Preprocessing Guide](./file-preprocess/README.en.md)

> âš ï¸ é¢„å¤„ç†æ“ä½œä¾èµ– GPU è®¡ç®—ç¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨å¸¦æœ‰ CUDA æ”¯æŒçš„æ˜¾å¡è®¾å¤‡è¿›è¡Œè¿è¡Œã€‚

---

## ğŸ“Œ æ—¥å¸¸ä½¿ç”¨æŒ‡å—ï¼ˆæ¯æ¬¡è¿è¡Œæ­¥éª¤ï¼‰

1. æ‰“å¼€ VSCodeï¼Œå°† `PDFChatAnnotator` æ‹–å…¥
2. æ‰“å¼€ç»ˆç«¯ Terminal
3. æ¿€æ´»ç¯å¢ƒå¹¶è¿è¡Œï¼š

```bash
conda activate pdfannotator
python manage.py runserver
```

è®¿é—®ç½‘å€ï¼šhttp://127.0.0.1:8000/

---

## ğŸ“‚ æ•°æ®å­˜å‚¨ä½ç½®

- æ ‡ç­¾æ•°æ®è¡¨ï¼š`database/label_lists.xlsx`
- æ ‡ç­¾åç§°è¡¨ï¼š`database/label_names.xlsx`
- å›¾ç‰‡å­˜å‚¨ï¼š`static/app/dataset`

---
